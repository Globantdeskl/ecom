applications:
  - name: checkout-same-day-delivery
    memory: 2G
    instances: ((min-instances))
    timeout: 180
    buildpacks:
      - java_buildpack_offline_4_32_1
    path: build/libs/checkout-same-day-delivery-0.0.1-SNAPSHOT.jar
    services:
      - same-day-delivery-pubsub-service
      - same-day-delivery-service
      - checkout-autoscaler
      - checkout-splunk
      - checkout-processing-queue
      - checkout-newrelic
    routes:
      - route: https://checkout-same-day-delivery-((env)).apps.internal
      - route: https://checkout-same-day-delivery-((env)).((public-domain))
    health-check-type: http
    health-check-http-endpoint: /actuator/health
    env:
      JAVA_OPTS: '-Xshare:off'
      JBP_CONFIG_OPEN_JDK_JRE: '{jre: { version: 14.+ }}'
      NEW_RELIC_APP_NAME: checkout-same-day-delivery-((env))
      NEW_RELIC_DISTRIBUTED_TRACING_ENABLED: true
    